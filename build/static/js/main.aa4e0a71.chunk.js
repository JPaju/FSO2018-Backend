(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(t,e,n){t.exports=n(42)},40:function(t,e,n){},42:function(t,e,n){"use strict";n.r(e);var a=n(3),o=n(14),c=n(5),r=n(4),u=n(6),i=n(0),l=n.n(i),m=n(15),s=n.n(m),f=function(t){function e(t){var n;return Object(a.a)(this,e),(n=Object(c.a)(this,Object(r.a)(e).call(this,t))).onChangeHandler=function(t){return function(e){var a=n.state.value;a[t]=e.target.value,n.setState({value:a})}},n.onSubmit=function(t){t.preventDefault(),n.onSubmitCallback(n.state.value),n.setState({value:{nimi:"",numero:""}})},n.render=function(){return l.a.createElement("form",{onSubmit:n.onSubmit},l.a.createElement("input",{value:n.state.value.nimi,onChange:n.onChangeHandler("nimi"),placeholder:"Nimi"}),l.a.createElement("br",null),l.a.createElement("input",{value:n.state.value.numero,onChange:n.onChangeHandler("numero"),placeholder:"Numero"}),l.a.createElement("br",null),l.a.createElement("button",{type:"submit"},n.buttonText))},n.onSubmitCallback=t.onSubmitCallback,n.placeHolder=t.placeHolder,n.buttonText=t.buttonText,n.fields=t.fields,n.state={value:{nimi:"",numero:""}},n}return Object(u.a)(e,t),e}(l.a.Component);f.defaultProps={buttonText:"Submit",placeHolder:"Value"};var d=f,h=function(t){var e=t.contact,n=t.deleteContact;return l.a.createElement("tr",null,l.a.createElement("td",null,e.name),l.a.createElement("td",null,e.number),l.a.createElement("td",null,l.a.createElement("button",{onClick:n},"Poista")))},b=function(t){var e=t.contacts,n=t.filter,a=t.deleteContact;return(e=e.filter(function(t){return t.name.toLowerCase().startsWith(n.toLowerCase())})).length>0?l.a.createElement("table",null,l.a.createElement("tbody",null,e.map(function(t){return l.a.createElement(h,{key:t.name+t.number,contact:t,deleteContact:a(t.id)})}))):"Ei yht\xe4\xe4n yhteystietoa"},C=function(t){var e=t.onChangeCallback;return l.a.createElement("input",{onChange:function(t){e(t.target.value)},placeholder:"Rajaa n\xe4ytett\xe4vi\xe4"})},v=function(t){var e=t.message;return null===e?null:l.a.createElement("div",{className:"notification"},e)},p=n(2),E=n.n(p),g="https://fso2018.herokuapp.com/api/persons",k={getAll:function(){return E.a.get(g).then(function(t){return t.data})},get:function(t){return E.a.get("".concat(g,"/").concat(t))},create:function(t){return E.a.post(g,t).then(function(t){return t.data})},update:function(t,e){return E.a.put("".concat(g,"/").concat(t),e).then(function(t){return t.data})},remove:function(t){return E.a.delete("".concat(g,"/").concat(t)).then(function(e){return console.log("Removed person with id ".concat(t))})}},y=(n(40),function(t){function e(t){var n;return Object(a.a)(this,e),(n=Object(c.a)(this,Object(r.a)(e).call(this,t))).addContact=function(t){var e={name:t.nimi,number:t.numero};if(n.isDuplicate(e)){if(window.confirm('"'.concat(e.name,'" on jo luettelossa, korvataanko numero uudella?'))){var a=n.state.contacts.find(function(t){return t.name===e.name}).id;return k.update(a,e).then(function(t){return n.fetchContacts()}).catch(function(t){n.createContact(e)}),n.addNotification("P\xe4ivitettiin henkil\xf6n ".concat(e.name," numeroksi ").concat(e.number),5)}}else e.name&&e.number?(n.createContact(e),n.addNotification("Lis\xe4ttiin henkil\xf6 ".concat(e.name,", numero: ").concat(e.number),5)):n.addNotification("Sy\xf6t\xe4 nimi JA numero!",5)},n.createContact=function(t){return k.create(t).then(function(t){return n.fetchContacts()})},n.removeContact=function(t){return function(){var e=n.state.contacts.find(function(e){return e.id===t}).name;window.confirm("Poistetaanko ".concat(e,"?"))&&k.remove(t).then(function(t){return n.fetchContacts()}).catch(function(t){return console.log(t)})}},n.isDuplicate=function(t){return n.state.contacts.find(function(e){return e.name===t.name})},n.addNotification=function(t,e){n.setState({error:t}),setTimeout(function(){n.setState({error:null})},1e3*e)},n.filterContacts=function(t){n.setState({filter:t})},n.fetchContacts=function(){k.getAll().then(function(t){return n.setState({contacts:t})}).catch(function(t){return console.log(t)})},n.componentDidMount=function(){return n.fetchContacts()},n.state={contacts:[],filter:"",error:null},n}return Object(u.a)(e,t),Object(o.a)(e,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("h1",null,"Puhelinluettelo"),l.a.createElement("h2",null,"Rajaa n\xe4ytett\xe4vi\xe4 yhteystietoja"),l.a.createElement(C,{onChangeCallback:this.filterContacts}),l.a.createElement("h2",null,"Lis\xe4\xe4 uusi yhteystieto"),l.a.createElement(v,{message:this.state.error}),l.a.createElement(d,{onSubmitCallback:this.addContact,buttonText:"Lis\xe4\xe4"}),l.a.createElement("br",null),l.a.createElement("h2",null,"Yhteystiedot"),l.a.createElement(b,{contacts:this.state.contacts,filter:this.state.filter,deleteContact:this.removeContact}))}}]),e}(l.a.Component));s.a.render(l.a.createElement(y,null),document.getElementById("root"))}},[[16,2,1]]]);
//# sourceMappingURL=main.aa4e0a71.chunk.js.map